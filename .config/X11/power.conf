#!/bin/sh

# Controle de tempo de inatividade (só usuário)
# Esse script define o tempo de bloqueio + DPMS usando `xset`.

# ---- TEMPOS ----
LOCK_MIN=10                         # Tempo até o bloqueio de tela (em minutos)
DPMS_OFF=$((LOCK_MIN * 60 - 10))    # Desliga monitores 10 min antes do lock

# ---- CONFIG X11 ----
xset s "$((LOCK_MIN * 60))" 0       # Inatividade para o screensaver
xset +dpms
xset dpms 0 0 "$DPMS_OFF"           # DPMS: standby/suspend/off

# ---- XSS-LOCK (garante instância única) ----
pgrep -xu "$USER" xss-lock >/dev/null ||  # Evita múltiplas instâncias
    exec xss-lock -l --transfer-sleep-lock -- dm-tool switch-to-greeter &
